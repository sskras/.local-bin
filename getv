#! /usr/bin/env sh

# SPDX-License-Identifier: BlueOak-1.0.0
# SPDX-FileCopyrightText: 2025 Saulius Krasuckas <saulius2_at_ar-fi_point_lt> | sskras

# Get videos from the internet.

Start_time=${1:-now}
Duration=${2:-60}m
URL="https://www.lrt.lt/mediateka/tiesiogiai/lrt-plius"
TRACKS="hls-audio1-ORG+hls-audio1-LIT+hls-3"
OUTPUT="%(title)s [%(id)s].%(ext)s"
LOG="[2021]-The-Souvenir-Part-II-(Suvenyras-II)-FHD.2025-01-30-LRT+.log"

Cmd="
at '${Start_time}' << \
-----------------------------
(
  date
  pwd
  timeout -s SIGINT         \
    ${Duration}             \
    yt-dlp                  \
      --audio-multistreams  \
      -f '${TRACKS}'        \
      -o '${OUTPUT}'        \
      ${URL}                \
) \
> '${LOG}' 2>&1
-----------------------------
"
eval "$Cmd"

echo "Using some defaults:"
echo "$Cmd"
